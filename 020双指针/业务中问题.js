// æŠŠä»¥ä¸‹åŸå§‹æ•°æ®æ’å…¥åˆ°å¯¹åº”çš„parentä¸‹
const rawData = [
  { val: "ä¸œ", parent: null },
  { val: "è¥¿", parent: null },
  { val: "å—", parent: null },
  { val: "åŒ—", parent: null },
  { val: "ä¸œ1", parent: "ä¸œ" },
  { val: "ä¸œ2", parent: "ä¸œ" },
  { val: "è¥¿1", parent: "è¥¿" },
  { val: "è¥¿2", parent: "è¥¿" },
  { val: "å—1", parent: "å—" },
  { val: "å—2", parent: "å—" },
  { val: "åŒ—1", parent: "åŒ—" },
  { val: "åŒ—2", parent: "åŒ—" },
];

/** ä¸€ã€æ™®é€šç†è§£ï¼ˆè¿˜æ˜¯ç”¨äº†ä¸¤æ¬¡å¾ªç¯ï¼‰  */

// let left = 0; // å·¦æŒ‡é’ˆ
// let slow = 4; // å³æŒ‡é’ˆ
// let newDataArr = [];

// while (right < rawData.length) {
//   if (rawData[left].val === rawData[right].parent) {
//     // pushä¹‹å‰å…ˆåˆ¤æ–­æ˜¯å¦åœ¨é‡Œé¢
//     if (!newDataArr.find((i) => i.val === rawData[left].val)) {
//       newDataArr.push(rawData[left]);
//     }
//     newDataArr.push(rawData[right]);
//     right++;
//   } else {
//     left++;
//   }
// }

/** äºŒã€åŒæŒ‡é’ˆè¿›é˜¶ */

let slow = 0; // æ…¢æŒ‡é’ˆï¼Œç”¨äºæ ‡ç¤ºçˆ¶èŠ‚ç‚¹
let newDataArr = [];

for (let i = 0; i < rawData.length; i++) {
  if (rawData[i].parent) {
    // å› ä¸ºâ€œä¸œ1â€ è¿™ç§å­èŠ‚ç‚¹éƒ½æ˜¯æœ‰åºçš„ï¼Œæ‰€ä»¥é™åˆ¶æ¯æ¬¡æ¨å…¥æ•°ç»„çš„æ˜¯å­èŠ‚ç‚¹
    if (rawData[slow].val === rawData[i].parent) {
      newDataArr.push(rawData[slow]); // 1ï¼‰æ¨å…¥[{ val: "ä¸œ", parent: null }]
      // å¦‚æœåœ¨è¿™é‡Œæ¨å…¥äº†{ val: "ä¸œ1", parent: "ä¸œ" }ï¼Œ ä¸‹ä¸€æ¬¡å°±ä¼šå˜æˆäº†â€œä¸œâ€å’Œâ€œä¸œ2â€éƒ½åœ¨é‡Œé¢
      slow++;
    }

    newDataArr.push(rawData[i]);

    // æ‰€ä»¥åŸç†æ˜¯ï¼Œæ¯æ¬¡éå†çš„æ—¶å€™ï¼Œå…¶å®éƒ½å¾€æ•°ç»„æ¨å…¥æ•°æ®
    // å½“ç¬¬ä¸€æ¬¡æ¨å…¥æ•°æ®çš„æ—¶å€™ï¼Œå‘ç°ç¬¬næ¡æ•°æ®çš„parentä¸ä¸€å¼€å§‹çš„å¤´ä¸€æ¡æ•°æ®çš„valç›¸ç­‰
    // åˆ™å…ˆæŠŠç¬¬ä¸€æ¡æ•°æ®å…ˆæ¨å…¥

    // ç„¶åç¬¬n+1æ¡æ•°æ®ï¼Œå…¶å®æ˜¯ä¸ç”¨å¤„ç†çš„ï¼Œå› ä¸ºæ¯æ¬¡ä¼šé»˜è®¤æ¨å…¥æ•°ç»„
    // åˆå› ä¸ºçˆ¶æ•°æ®åªèƒ½å¾€æ•°ç»„é‡Œé¢æ¨ä¸€æ¬¡ï¼Œæ‰€ä»¥å½“å·²ç»è¢«æ¨å…¥ä¸€æ¬¡æ•°ç»„ä¹‹åï¼ŒslowæŒ‡é’ˆéƒ½è¦+1

    // ä¸‹ä¸€ä¸ªå¾ªç¯ï¼Œå½“å‡†å¤‡è¢«ç”¨äºå¯¹æ¯”çš„æ•°æ®ä¸slowæŒ‡é’ˆå¯¹åº”çš„æ•°æ®ç›¸ç­‰æ—¶ï¼ŒslowæŒ‡é’ˆå¯¹åº”çš„æ•°æ®å°±ä¼šè¢«æ¨å…¥ï¼Œç„¶åslowæŒ‡å‘ä¸‹ä¸€ä¸ªä½ç½®

    // æ€»ç»“æ¥è¯´ï¼šå°±æ˜¯æ¯æ¬¡éƒ½ä¼šå¾€æ•°æ®é‡Œé¢æ¨å…¥å­èŠ‚ç‚¹çš„æ•°æ®ï¼Œç„¶åç”¨ä¸€ä¸ªslowæŒ‡é’ˆæ¥æ ‡ç¤ºçˆ¶èŠ‚ç‚¹ï¼Œæ¯æ¬¡æ¨å…¥å­èŠ‚ç‚¹ä¹‹å‰éƒ½å¯¹æ¯”å¯¹æ¯”ä¸‹slowæŒ‡é’ˆæŒ‡å‘çš„çˆ¶èŠ‚ç‚¹æ˜¯å¦ä¸å½“å‰è¢«æ¨å…¥çš„å­èŠ‚ç‚¹æœ‰ä»å±å…³ç³»ï¼Œæœ‰çš„è¯ï¼Œåˆ™æ¨å…¥çˆ¶èŠ‚ç‚¹ï¼Œå¹¶slowæŒ‡å‘ä¸‹ä¸€ä¸ªçˆ¶èŠ‚ç‚¹
  }
}

console.log("ğŸš€ ~ file: ä¸šåŠ¡ä¸­é—®é¢˜.js ~ line 20 ~ newDataArr", newDataArr);
